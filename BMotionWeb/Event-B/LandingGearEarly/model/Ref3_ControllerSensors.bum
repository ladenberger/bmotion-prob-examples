<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<org.eventb.core.machineFile org.eventb.core.configuration="org.eventb.core.fwd" org.eventb.texttools.text_lastmodified="1422633077332" org.eventb.texttools.text_representation="machine Ref3_ControllerSensors refines Ref2_ControllerOutputs  sees Context0 Context1 Context2 Context3&#10;&#10;variables gear door close_door_valve open_door_valve retract_gear_valve extend_gear_valve open_EV close_EV retract_EV extend_EV door_closed door_open gear_extended gear_retracted last_door_action last_gear_action valid_sensors_gear_extended valid_sensors_gear_retracted valid_sensors_door_closed valid_sensors_door_open anomaly proof_sensors&#10;&#10;invariants&#10;  @door_closed door_closed ∈ POSITION → (1‥3 → BOOL)&#10;  @door_open door_open ∈ POSITION → (1‥3 → BOOL)&#10;  @gear_extended gear_extended ∈ POSITION → (1‥3 → BOOL)&#10;  @gear_retracted gear_retracted ∈ POSITION → (1‥3 → BOOL)&#10;  @last_door_action last_door_action ∈ ℙ({open_door_stimulus, close_door_stimulus})&#10;  @last_door_action2 finite(last_door_action) ∧ card(last_door_action) &lt;2&#10;  @last_gear_action last_gear_action ∈ ℙ({extend_gear_stimulus, retract_gear_stimulus})&#10;  @last_gear_action2 finite(last_gear_action) ∧ card(last_gear_action) &lt;2&#10;  @valid_sensors1 valid_sensors_gear_extended ∈ POSITION → ℙ(1‥3)&#10;  @valid_sensors2 valid_sensors_gear_retracted ∈ POSITION → ℙ(1‥3)&#10;  @valid_sensors3 valid_sensors_door_open ∈ POSITION → ℙ(1‥3)&#10;  @valid_sensors4 valid_sensors_door_closed ∈ POSITION → ℙ(1‥3)&#10;  @TEST1 (anomaly=FALSE∧(door(front)=door_moving ∨ door(left)=door_moving ∨ door(right)=door_moving)) ⇒ ¬(gear(front)=gear_moving) ∧ ¬(gear(left)=gear_moving) ∧ ¬(gear(right)=gear_moving)&#10;  @TEST2 (anomaly=FALSE∧(gear(front)=gear_moving ∨ gear(left)=gear_moving ∨ gear(right)=gear_moving)) ⇒ ¬(door(front)=door_moving) ∧ ¬(door(left)=door_moving) ∧ ¬(door(right)=door_moving)&#10;  @anomaly anomaly ∈ BOOL&#10;  @invProof proof_sensors ∈ BOOL&#10;&#10;events&#10;  event INITIALISATION extends INITIALISATION&#10;    then&#10;      @door_closed door_closed ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}&#10;      @door_open door_open ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}&#10;      @gear_extended gear_extended ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}&#10;      @gear_retracted gear_retracted ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}&#10;      @last_door_action last_door_action ≔  ∅&#10;      @last_gear_action last_gear_action ≔  ∅&#10;      @valid_sensors1 valid_sensors_gear_extended ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}&#10;      @valid_sensors2 valid_sensors_gear_retracted ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}&#10;      @valid_sensors3 valid_sensors_door_open ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}&#10;      @valid_sensors4 valid_sensors_door_closed ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}&#10;      @anomaly anomaly ≔ FALSE&#10;      @proof proof_sensors ≔ FALSE&#10;  end&#10;&#10;  event env_start_extending extends env_start_extending&#10;    where&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act3 gear_retracted ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}&#10;  end&#10;&#10;  event env_extend_gear extends env_extend_gear&#10;    where&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act3 gear_extended ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}&#10;  end&#10;&#10;  event env_retract_gear extends env_retract_gear&#10;    where&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act3 gear_retracted ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}&#10;  end&#10;&#10;  event env_start_retracting extends env_start_retracting&#10;    where&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act3 gear_extended ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}&#10;  end&#10;&#10;  event env_start_open_door extends env_start_open_door&#10;    then&#10;      @act3 door_closed ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}&#10;/*    any nogremlin valF valL valR&#10;    where&#10;      @grd101 nogremlin ∈ BOOL ∧ nogremlin=TRUE&#10;      @grd102 valF ∈ 1‥3 → BOOL&#10;      @grd103 valL ∈ 1‥3 → BOOL&#10;      @grd104 valR ∈ 1‥3 → BOOL&#10;      @grd105 nogremlin=TRUE ⇔ (ran(valF ∪ valL ∪ valR) = {FALSE})&#10;      @grd106 nogremlin=FALSE ⇒ (valF={1↦FALSE,2↦TRUE,3↦FALSE} ∧ valL={1↦TRUE,2↦TRUE,3↦FALSE} ∧ valR = {1↦TRUE,2↦FALSE,3↦FALSE})&#10;      then&#10;      @act3 door_closed ≔ {front↦valF, left↦valL, right↦valR}*/&#10;  end&#10;&#10;  event env_open_door extends env_open_door&#10;    where&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act3 door_open ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}&#10;  end&#10;&#10;  event env_close_door extends env_close_door&#10;    where&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act3 door_closed ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}&#10;  end&#10;&#10;  event env_start_close_door extends env_start_close_door&#10;    where&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act3 door_open ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}&#10;  end&#10;&#10;  event env_open_valve_open_door extends env_open_valve_open_door&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event env_close_valve_open_door extends env_close_valve_open_door&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event env_open_valve_close_door extends env_open_valve_close_door&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event env_close_valve_close_door extends env_close_valve_close_door&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event env_open_valve_retract_gear extends env_open_valve_retract_gear&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event env_close_valve_retract_gear extends env_close_valve_retract_gear&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event env_open_valve_extend_gear extends env_open_valve_extend_gear&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event env_close_valve_extend_gear extends env_close_valve_extend_gear&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event con_set_anomaly_output&#10;    where&#10;      @proof proof_sensors = FALSE&#10;      then&#10;      @act anomaly ≔ TRUE&#10;/*  event gremlin_gear_retracted&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_gear_retracted(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act gear_retracted(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;&#10;  event gremlin_gear_extended&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_gear_extended(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act gear_extended(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;&#10;  event gremlin_door_open&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_door_open(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act door_open(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;&#10;  event gremlin_door_closed&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_door_closed(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act door_closed(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;*/&#10;  end&#10;&#10;&#10;  event con_stimulate_open_door_valve extends con_stimulate_open_door_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;      @gear_not_moving (ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {TRUE}&#10;                       )&#10;                       ∨&#10;                       ( ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {TRUE}&#10;                       )&#10;    then&#10;      @act last_door_action ≔  {open_door_stimulus}&#10;  end&#10;&#10;  event con_stop_stimulate_open_door_valve extends con_stop_stimulate_open_door_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event con_stimulate_close_door_valve extends con_stimulate_close_door_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;      @grd (ran(valid_sensors_door_closed(front)◁door_closed(front)) = {FALSE}&#10;           ∧ ran(valid_sensors_door_closed(left)◁door_closed(left)) = {FALSE}&#10;           ∧ ran(valid_sensors_door_closed(right)◁door_closed(right)) = {FALSE}&#10;           )&#10;           ∨ last_door_action =  {open_door_stimulus}&#10;      @gear_not_moving (ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {TRUE}&#10;                       )&#10;                       ∨&#10;                       ( ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {TRUE}&#10;                       )&#10;    then&#10;      @act last_door_action ≔  {close_door_stimulus}&#10;  end&#10;&#10;  event con_stop_stimulate_close_door_valve extends con_stop_stimulate_close_door_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event con_stimulate_retract_gear_valve extends con_stimulate_retract_gear_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;      @doorfront ran(valid_sensors_door_open(front)◁door_open(front)) = {TRUE}&#10;      @doorleft ran(valid_sensors_door_open(left)◁door_open(left)) = {TRUE}&#10;      @doorright ran(valid_sensors_door_open(right)◁door_open(right)) = {TRUE}&#10;      @grd4 (ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {FALSE}&#10;            ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {FALSE}&#10;            ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {FALSE}&#10;            )&#10;            ∨  (ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {TRUE}&#10;            ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {TRUE}&#10;            ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {TRUE}&#10;            ∧ last_gear_action =  {extend_gear_stimulus})&#10;    then&#10;      @act last_gear_action ≔  {retract_gear_stimulus}&#10;  end&#10;&#10;  event con_stop_stimulate_retract_gear_valve extends con_stop_stimulate_retract_gear_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;  event con_stimulate_extend_gear_valve extends con_stimulate_extend_gear_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;      @doorfront ran(valid_sensors_door_open(front)◁door_open(front)) = {TRUE}&#10;      @doorleft ran(valid_sensors_door_open(left)◁door_open(left)) = {TRUE}&#10;      @doorright ran(valid_sensors_door_open(right)◁door_open(right)) = {TRUE}&#10;      @grd (ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {FALSE}&#10;           ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {FALSE}&#10;           ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {FALSE}&#10;           )&#10;           ∨  (ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {TRUE}&#10;           ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {TRUE}&#10;           ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {TRUE}&#10;           ∧ last_gear_action =  {retract_gear_stimulus})&#10;    then&#10;      @act last_gear_action ≔  {extend_gear_stimulus}&#10;  end&#10;&#10;  event con_stop_stimulate_extend_gear_valve extends con_stop_stimulate_extend_gear_valve&#10;    where&#10;      @proof proof_sensors = FALSE&#10;  end&#10;&#10;&#10;  event sensor_invalid_gear_extended&#10;    any pos val notval&#10;    where&#10;      @gear pos∈ POSITION&#10;      @val val∈BOOL&#10;      @notval notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)&#10;      @validyet card(valid_sensors_gear_extended(pos))=3&#10;      @nowinvalid card(ran(valid_sensors_gear_extended(pos)◁gear_extended(pos)))&gt;1&#10;      @validvalue card(gear_extended(pos)▷{val})=2&#10;    then&#10;      @act1 valid_sensors_gear_extended(pos) ≔ valid_sensors_gear_extended(pos) ∖ dom(gear_extended(pos)▷{notval})&#10;      @unproof proof_sensors ≔ FALSE&#10;  end&#10;&#10;  event sensor_invalid_gear_retracted&#10;    any pos val notval&#10;    where&#10;      @gear pos∈ POSITION&#10;      @val val∈BOOL&#10;      @notval notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)&#10;      @validyet card(valid_sensors_gear_retracted(pos))=3&#10;      @nowinvalid card(ran(valid_sensors_gear_retracted(pos)◁gear_retracted(pos)))&gt;1&#10;      @validvalue card(gear_retracted(pos)▷{val})=2&#10;    then&#10;      @act1 valid_sensors_gear_retracted(pos) ≔ valid_sensors_gear_retracted(pos) ∖ dom(gear_retracted(pos)▷{notval})&#10;      @unproof proof_sensors ≔ FALSE&#10;  end&#10;&#10;  event sensor_invalid_door_open&#10;    any pos val notval&#10;    where&#10;      @gear pos∈ POSITION&#10;      @val val∈BOOL&#10;      @notval notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)&#10;      @validyet card(valid_sensors_door_open(pos))=3&#10;      @nowinvalid card(ran(valid_sensors_door_open(pos)◁door_open(pos)))&gt;1&#10;      @validvalue card(door_open(pos)▷{val})=2&#10;    then&#10;      @act1 valid_sensors_door_open(pos) ≔ valid_sensors_door_open(pos) ∖ dom(door_open(pos)▷{notval})&#10;      @unproof proof_sensors ≔ FALSE&#10;  end&#10;&#10;  event sensor_invalid_door_closed&#10;    any pos val notval&#10;    where&#10;      @gear pos∈ POSITION&#10;      @val val∈BOOL&#10;      @notval notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)&#10;      @validyet card(valid_sensors_door_closed(pos))=3&#10;      @nowinvalid card(ran(valid_sensors_door_closed(pos)◁door_closed(pos)))&gt;1&#10;      @validvalue card(door_closed(pos)▷{val})=2&#10;    then&#10;      @act1 valid_sensors_door_closed(pos) ≔ valid_sensors_door_closed(pos) ∖ dom(door_closed(pos)▷{notval})&#10;      @unproof proof_sensors ≔ FALSE&#10;  end&#10;&#10;&#10;&#10;  event sensor_invalid_Anomaly&#10;    any pos&#10;    where&#10;      @gear pos∈ POSITION&#10;      @invalid (  card(valid_sensors_gear_extended(pos)) =2 ∧ card(ran(valid_sensors_gear_extended(pos)◁gear_extended(pos)))&gt;1)&#10;               ∨ (card(valid_sensors_gear_retracted(pos))=2 ∧ card(ran(valid_sensors_gear_retracted(pos)◁gear_retracted(pos)))&gt;1)&#10;               ∨ (card(valid_sensors_door_open(pos))     =2 ∧ card(ran(valid_sensors_door_open(pos)◁door_open(pos)))&gt;1)&#10;               ∨ (card(valid_sensors_door_closed(pos))   =2 ∧ card(ran(valid_sensors_door_closed(pos)◁door_closed(pos)))&gt;1)&#10;    then&#10;      @act1 anomaly ≔ TRUE&#10;      @unproof proof_sensors ≔ FALSE&#10;  end&#10;end&#10;" version="5">
<org.eventb.core.refinesMachine name="_1VSloKiXEeSuIbt-pGeMCA" org.eventb.core.target="Ref2_ControllerOutputs"/>
<org.eventb.core.seesContext name="_1VSloaiXEeSuIbt-pGeMCA" org.eventb.core.target="Context0"/>
<org.eventb.core.seesContext name="_1VSloqiXEeSuIbt-pGeMCA" org.eventb.core.target="Context1"/>
<org.eventb.core.seesContext name="_1VSlo6iXEeSuIbt-pGeMCA" org.eventb.core.target="Context2"/>
<org.eventb.core.seesContext name="_1VSlpKiXEeSuIbt-pGeMCA" org.eventb.core.target="Context3"/>
<org.eventb.core.variable name="_KkdfoWY0EeO7UsfGCD69ng" org.eventb.core.identifier="gear"/>
<org.eventb.core.variable name="_Y7IDMGY0EeO7UsfGCD69ng" org.eventb.core.identifier="door"/>
<org.eventb.core.variable name="_qpk6kGY3EeO7UsfGCD69ng" org.eventb.core.identifier="close_door_valve"/>
<org.eventb.core.variable name="_qplhoGY3EeO7UsfGCD69ng" org.eventb.core.identifier="open_door_valve"/>
<org.eventb.core.variable name="_qplhoWY3EeO7UsfGCD69ng" org.eventb.core.identifier="retract_gear_valve"/>
<org.eventb.core.variable name="_qplhomY3EeO7UsfGCD69ng" org.eventb.core.identifier="extend_gear_valve"/>
<org.eventb.core.variable name="_xET6kGcBEeO7UsfGCD69ng" org.eventb.core.identifier="open_EV"/>
<org.eventb.core.variable name="_xET6kWcBEeO7UsfGCD69ng" org.eventb.core.identifier="close_EV"/>
<org.eventb.core.variable name="_L0OSwGcCEeO7UsfGCD69ng" org.eventb.core.identifier="retract_EV"/>
<org.eventb.core.variable name="_L0O50GcCEeO7UsfGCD69ng" org.eventb.core.identifier="extend_EV"/>
<org.eventb.core.variable name="_fH9GwHnyEeShDLOsNSqxoQ" org.eventb.core.identifier="door_closed"/>
<org.eventb.core.variable name="_fH9GwXnyEeShDLOsNSqxoQ" org.eventb.core.identifier="door_open"/>
<org.eventb.core.variable name="_1aTZYXnwEeShDLOsNSqxoQ" org.eventb.core.identifier="gear_extended"/>
<org.eventb.core.variable name="_1aTZYnnwEeShDLOsNSqxoQ" org.eventb.core.identifier="gear_retracted"/>
<org.eventb.core.variable name="_1aUAcHnwEeShDLOsNSqxoQ" org.eventb.core.identifier="last_door_action"/>
<org.eventb.core.variable name="_1aUAcXnwEeShDLOsNSqxoQ" org.eventb.core.identifier="last_gear_action"/>
<org.eventb.core.variable name="_1aUAcnnwEeShDLOsNSqxoQ" org.eventb.core.identifier="valid_sensors_gear_extended"/>
<org.eventb.core.variable name="_1aUAc3nwEeShDLOsNSqxoQ" org.eventb.core.identifier="valid_sensors_gear_retracted"/>
<org.eventb.core.variable name="_1aUAdHnwEeShDLOsNSqxoQ" org.eventb.core.identifier="valid_sensors_door_closed"/>
<org.eventb.core.variable name="_1aUAdXnwEeShDLOsNSqxoQ" org.eventb.core.identifier="valid_sensors_door_open"/>
<org.eventb.core.variable name="_IgZWQHYcEeSK8a64sCWOYA" org.eventb.core.identifier="anomaly"/>
<org.eventb.core.variable name="_JspXkKhcEeS1Uv-zbYdYYQ" org.eventb.core.identifier="proof_sensors"/>
<org.eventb.core.invariant name="_fH9t0HnyEeShDLOsNSqxoQ" org.eventb.core.label="door_closed" org.eventb.core.predicate="door_closed ∈ POSITION → (1‥3 → BOOL)"/>
<org.eventb.core.invariant name="_1aWcsXnwEeShDLOsNSqxoQ" org.eventb.core.label="door_open" org.eventb.core.predicate="door_open ∈ POSITION → (1‥3 → BOOL)"/>
<org.eventb.core.invariant name="_1aWcsnnwEeShDLOsNSqxoQ" org.eventb.core.label="gear_extended" org.eventb.core.predicate="gear_extended ∈ POSITION → (1‥3 → BOOL)"/>
<org.eventb.core.invariant name="_1aXDwHnwEeShDLOsNSqxoQ" org.eventb.core.label="gear_retracted" org.eventb.core.predicate="gear_retracted ∈ POSITION → (1‥3 → BOOL)"/>
<org.eventb.core.invariant name="_1aYR4HnwEeShDLOsNSqxoQ" org.eventb.core.label="last_door_action" org.eventb.core.predicate="last_door_action ∈ ℙ({open_door_stimulus, close_door_stimulus})"/>
<org.eventb.core.invariant name="_1aYR4XnwEeShDLOsNSqxoQ" org.eventb.core.label="last_door_action2" org.eventb.core.predicate="finite(last_door_action) ∧ card(last_door_action) &lt;2"/>
<org.eventb.core.invariant name="_1aYR4nnwEeShDLOsNSqxoQ" org.eventb.core.label="last_gear_action" org.eventb.core.predicate="last_gear_action ∈ ℙ({extend_gear_stimulus, retract_gear_stimulus})"/>
<org.eventb.core.invariant name="_1aYR43nwEeShDLOsNSqxoQ" org.eventb.core.label="last_gear_action2" org.eventb.core.predicate="finite(last_gear_action) ∧ card(last_gear_action) &lt;2"/>
<org.eventb.core.invariant name="_1aXDwXnwEeShDLOsNSqxoQ" org.eventb.core.label="valid_sensors1" org.eventb.core.predicate="valid_sensors_gear_extended ∈ POSITION → ℙ(1‥3)"/>
<org.eventb.core.invariant name="_1aXq0HnwEeShDLOsNSqxoQ" org.eventb.core.label="valid_sensors2" org.eventb.core.predicate="valid_sensors_gear_retracted ∈ POSITION → ℙ(1‥3)"/>
<org.eventb.core.invariant name="_1aXq0XnwEeShDLOsNSqxoQ" org.eventb.core.label="valid_sensors3" org.eventb.core.predicate="valid_sensors_door_open ∈ POSITION → ℙ(1‥3)"/>
<org.eventb.core.invariant name="_1aXq0nnwEeShDLOsNSqxoQ" org.eventb.core.label="valid_sensors4" org.eventb.core.predicate="valid_sensors_door_closed ∈ POSITION → ℙ(1‥3)"/>
<org.eventb.core.invariant name="_Z4STYKiWEeSuIbt-pGeMCA" org.eventb.core.label="TEST1" org.eventb.core.predicate="(anomaly=FALSE∧(door(front)=door_moving ∨ door(left)=door_moving ∨ door(right)=door_moving)) ⇒ ¬(gear(front)=gear_moving) ∧ ¬(gear(left)=gear_moving) ∧ ¬(gear(right)=gear_moving)"/>
<org.eventb.core.invariant name="_Z4STYaiWEeSuIbt-pGeMCA" org.eventb.core.label="TEST2" org.eventb.core.predicate="(anomaly=FALSE∧(gear(front)=gear_moving ∨ gear(left)=gear_moving ∨ gear(right)=gear_moving)) ⇒ ¬(door(front)=door_moving) ∧ ¬(door(left)=door_moving) ∧ ¬(door(right)=door_moving)"/>
<org.eventb.core.invariant name="_IgZ9UHYcEeSK8a64sCWOYA" org.eventb.core.label="anomaly" org.eventb.core.predicate="anomaly ∈ BOOL"/>
<org.eventb.core.invariant name="_JsqlsKhcEeS1Uv-zbYdYYQ" org.eventb.core.label="invProof" org.eventb.core.predicate="proof_sensors ∈ BOOL"/>
<org.eventb.core.event name="_xET6kWcBEeO7UsfGCD69nh" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="INITIALISATION">
<org.eventb.core.action name="_soNwcGcGEeO7UsfGCD69ng" org.eventb.core.assignment="door_closed ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}" org.eventb.core.label="door_closed"/>
<org.eventb.core.action name="_soNwcWcGEeO7UsfGCD69ng" org.eventb.core.assignment="door_open ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}" org.eventb.core.label="door_open"/>
<org.eventb.core.action name="_soNwcmcGEeO7UsfGCD69ng" org.eventb.core.assignment="gear_extended ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}" org.eventb.core.label="gear_extended"/>
<org.eventb.core.action name="_soNwc2cGEeO7UsfGCD69ng" org.eventb.core.assignment="gear_retracted ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}" org.eventb.core.label="gear_retracted"/>
<org.eventb.core.action name="_pmSioWcpEeOIZYXp1CRUOw" org.eventb.core.assignment="last_door_action ≔  ∅" org.eventb.core.label="last_door_action"/>
<org.eventb.core.action name="_cRkAYGctEeOU3Z0T65yXqA" org.eventb.core.assignment="last_gear_action ≔  ∅" org.eventb.core.label="last_gear_action"/>
<org.eventb.core.action name="_AgR3UHYXEeSK8a64sCWOYA" org.eventb.core.assignment="valid_sensors_gear_extended ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}" org.eventb.core.label="valid_sensors1"/>
<org.eventb.core.action name="_AgR3UXYXEeSK8a64sCWOYA" org.eventb.core.assignment="valid_sensors_gear_retracted ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}" org.eventb.core.label="valid_sensors2"/>
<org.eventb.core.action name="_AgR3UnYXEeSK8a64sCWOYA" org.eventb.core.assignment="valid_sensors_door_open ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}" org.eventb.core.label="valid_sensors3"/>
<org.eventb.core.action name="_AgR3U3YXEeSK8a64sCWOYA" org.eventb.core.assignment="valid_sensors_door_closed ≔ {front↦{1,2,3}, left↦{1,2,3}, right↦{1,2,3}}" org.eventb.core.label="valid_sensors4"/>
<org.eventb.core.action name="_IgakYHYcEeSK8a64sCWOYA" org.eventb.core.assignment="anomaly ≔ FALSE" org.eventb.core.label="anomaly"/>
<org.eventb.core.action name="_JsrMwKhcEeS1Uv-zbYdYYQ" org.eventb.core.assignment="proof_sensors ≔ FALSE" org.eventb.core.label="proof"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBLRQGfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_start_extending">
<org.eventb.core.refinesEvent name="_1VVo8KiXEeSuIbt-pGeMCA" org.eventb.core.target="env_start_extending"/>
<org.eventb.core.guard name="_JsrMwqhcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_hBLRQmfJEeO3ssiFDTK-qw" org.eventb.core.assignment="gear_retracted ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBLRQ2fJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_extend_gear">
<org.eventb.core.refinesEvent name="_1VVo8aiXEeSuIbt-pGeMCA" org.eventb.core.target="env_extend_gear"/>
<org.eventb.core.guard name="_JsrMxKhcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_hBLRRWfJEeO3ssiFDTK-qw" org.eventb.core.assignment="gear_extended ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBL4UGfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_retract_gear">
<org.eventb.core.refinesEvent name="_1VWQAKiXEeSuIbt-pGeMCA" org.eventb.core.target="env_retract_gear"/>
<org.eventb.core.guard name="_JsrMxqhcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_hBL4UmfJEeO3ssiFDTK-qw" org.eventb.core.assignment="gear_retracted ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBL4U2fJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_start_retracting">
<org.eventb.core.refinesEvent name="_1VWQAaiXEeSuIbt-pGeMCA" org.eventb.core.target="env_start_retracting"/>
<org.eventb.core.guard name="_Jsrz0ahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_hBMfYGfJEeO3ssiFDTK-qw" org.eventb.core.assignment="gear_extended ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBMfYWfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_start_open_door">
<org.eventb.core.refinesEvent name="_1VWQAqiXEeSuIbt-pGeMCA" org.eventb.core.target="env_start_open_door"/>
<org.eventb.core.action name="_hBNGcGfJEeO3ssiFDTK-qw" org.eventb.core.assignment="door_closed ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}" org.eventb.core.comment="any nogremlin valF valL valR&#10;    where&#10;      @grd101 nogremlin ∈ BOOL ∧ nogremlin=TRUE&#10;      @grd102 valF ∈ 1‥3 → BOOL&#10;      @grd103 valL ∈ 1‥3 → BOOL&#10;      @grd104 valR ∈ 1‥3 → BOOL&#10;      @grd105 nogremlin=TRUE ⇔ (ran(valF ∪ valL ∪ valR) = {FALSE})&#10;      @grd106 nogremlin=FALSE ⇒ (valF={1↦FALSE,2↦TRUE,3↦FALSE} ∧ valL={1↦TRUE,2↦TRUE,3↦FALSE} ∧ valR = {1↦TRUE,2↦FALSE,3↦FALSE})&#10;      then&#10;      @act3 door_closed ≔ {front↦valF, left↦valL, right↦valR}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBNGcWfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_open_door">
<org.eventb.core.refinesEvent name="_1VWQA6iXEeSuIbt-pGeMCA" org.eventb.core.target="env_open_door"/>
<org.eventb.core.guard name="_Jsrz1ahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_hBNtgWfJEeO3ssiFDTK-qw" org.eventb.core.assignment="door_open ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBNtgmfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_close_door">
<org.eventb.core.refinesEvent name="_1VWQBKiXEeSuIbt-pGeMCA" org.eventb.core.target="env_close_door"/>
<org.eventb.core.guard name="_Jsrz16hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_hBOUkWfJEeO3ssiFDTK-qw" org.eventb.core.assignment="door_closed ≔ {front↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, left↦{1↦TRUE, 2↦TRUE, 3↦TRUE}, right↦{1↦TRUE, 2↦TRUE, 3↦TRUE}}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBOUkmfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_start_close_door">
<org.eventb.core.refinesEvent name="_1VW3EKiXEeSuIbt-pGeMCA" org.eventb.core.target="env_start_close_door"/>
<org.eventb.core.guard name="_Jssa4ahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_hBO7oWfJEeO3ssiFDTK-qw" org.eventb.core.assignment="door_open ≔ {front↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, left↦{1↦FALSE, 2↦FALSE, 3↦FALSE}, right↦{1↦FALSE, 2↦FALSE, 3↦FALSE}}" org.eventb.core.label="act3"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBO7omfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_open_valve_open_door">
<org.eventb.core.refinesEvent name="_1VW3EaiXEeSuIbt-pGeMCA" org.eventb.core.target="env_open_valve_open_door"/>
<org.eventb.core.guard name="_Jssa46hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBPisWfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_close_valve_open_door">
<org.eventb.core.refinesEvent name="_1VW3EqiXEeSuIbt-pGeMCA" org.eventb.core.target="env_close_valve_open_door"/>
<org.eventb.core.guard name="_Jssa5ahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBPis2fJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_open_valve_close_door">
<org.eventb.core.refinesEvent name="_1VW3E6iXEeSuIbt-pGeMCA" org.eventb.core.target="env_open_valve_close_door"/>
<org.eventb.core.guard name="_Jssa56hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBPitWfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_close_valve_close_door">
<org.eventb.core.refinesEvent name="_1VW3FKiXEeSuIbt-pGeMCA" org.eventb.core.target="env_close_valve_close_door"/>
<org.eventb.core.guard name="_JstB8ahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBQJwWfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_open_valve_retract_gear">
<org.eventb.core.refinesEvent name="_1VXeIKiXEeSuIbt-pGeMCA" org.eventb.core.target="env_open_valve_retract_gear"/>
<org.eventb.core.guard name="_JstB86hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBQJw2fJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_close_valve_retract_gear">
<org.eventb.core.refinesEvent name="_1VjEUKiXEeSuIbt-pGeMCA" org.eventb.core.target="env_close_valve_retract_gear"/>
<org.eventb.core.guard name="_JstB9ahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBQw0GfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_open_valve_extend_gear">
<org.eventb.core.refinesEvent name="_1VjEUaiXEeSuIbt-pGeMCA" org.eventb.core.target="env_open_valve_extend_gear"/>
<org.eventb.core.guard name="_JstB96hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBQw0mfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="env_close_valve_extend_gear">
<org.eventb.core.refinesEvent name="_1VjEUqiXEeSuIbt-pGeMCA" org.eventb.core.target="env_close_valve_extend_gear"/>
<org.eventb.core.guard name="_JstpAahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_Yyx7MKeWEeSI34mkucxu2g" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.label="con_set_anomaly_output">
<org.eventb.core.guard name="_JstpAqhcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.action name="_zglvs6eYEeSI34mkucxu2g" org.eventb.core.assignment="anomaly ≔ TRUE" org.eventb.core.comment="event gremlin_gear_retracted&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_gear_retracted(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act gear_retracted(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;&#10;  event gremlin_gear_extended&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_gear_extended(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act gear_extended(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;&#10;  event gremlin_door_open&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_door_open(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act door_open(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;&#10;  event gremlin_door_closed&#10;    any gp newval1 newval2 newval3&#10;    where&#10;      @grd1 gp ∈ POSITION ∧ gp=front&#10;      @grd2 newval1 = TRUE&#10;      @grd3 newval2 = FALSE&#10;      @grd4 newval3 = TRUE&#10;      @grd5 card(valid_sensors_door_closed(gp))=3&#10;      @proof proof_sensors = FALSE&#10;    then&#10;      @act door_closed(gp) ≔ {1↦newval1, 2↦newval2, 3↦newval3}&#10;      @actProof proof_sensors ≔ TRUE&#10;  end&#10;" org.eventb.core.label="act"/>
</org.eventb.core.event>
<org.eventb.core.event name="_xET6kWcBEeO7UsfGCD69ny" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stimulate_open_door_valve">
<org.eventb.core.refinesEvent name="_1VjrYKiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stimulate_open_door_valve"/>
<org.eventb.core.guard name="_JsveMahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.guard name="_Ie4-wGc7EeOU3Z0T65yXqA" org.eventb.core.label="gear_not_moving" org.eventb.core.predicate="(ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {TRUE}&#10;                       )&#10;                       ∨&#10;                       ( ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {TRUE}&#10;                       )"/>
<org.eventb.core.action name="_Yg1BEGcqEeOIZYXp1CRUOw" org.eventb.core.assignment="last_door_action ≔  {open_door_stimulus}" org.eventb.core.label="act"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBQw1GfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stop_stimulate_open_door_valve">
<org.eventb.core.refinesEvent name="_1VjrYaiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stop_stimulate_open_door_valve"/>
<org.eventb.core.guard name="_JsveM6hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_xET6kWcBEeO7UsfGCD69n{" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stimulate_close_door_valve">
<org.eventb.core.refinesEvent name="_1VjrYqiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stimulate_close_door_valve"/>
<org.eventb.core.guard name="_JswFQahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.guard name="_oZAasGcqEeOIZYXp1CRUOw" org.eventb.core.label="grd" org.eventb.core.predicate="(ran(valid_sensors_door_closed(front)◁door_closed(front)) = {FALSE}&#10;           ∧ ran(valid_sensors_door_closed(left)◁door_closed(left)) = {FALSE}&#10;           ∧ ran(valid_sensors_door_closed(right)◁door_closed(right)) = {FALSE}&#10;           )&#10;           ∨ last_door_action =  {open_door_stimulus}"/>
<org.eventb.core.guard name="_Ie4-wWc7EeOU3Z0T65yXqA" org.eventb.core.label="gear_not_moving" org.eventb.core.predicate="(ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {TRUE}&#10;                       )&#10;                       ∨&#10;                       ( ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {TRUE}&#10;                       ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {TRUE}&#10;                       )"/>
<org.eventb.core.action name="_Yg1oIGcqEeOIZYXp1CRUOw" org.eventb.core.assignment="last_door_action ≔  {close_door_stimulus}" org.eventb.core.label="act"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBRX4WfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stop_stimulate_close_door_valve">
<org.eventb.core.refinesEvent name="_1VkScKiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stop_stimulate_close_door_valve"/>
<org.eventb.core.guard name="_JswFQ6hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBRX42fJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stimulate_retract_gear_valve">
<org.eventb.core.refinesEvent name="_1VkScaiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stimulate_retract_gear_valve"/>
<org.eventb.core.guard name="_JswFRahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.guard name="_RSb1gnn_EeS3g_eiAim-cA" org.eventb.core.label="doorfront" org.eventb.core.predicate="ran(valid_sensors_door_open(front)◁door_open(front)) = {TRUE}"/>
<org.eventb.core.guard name="_RSb1g3n_EeS3g_eiAim-cA" org.eventb.core.label="doorleft" org.eventb.core.predicate="ran(valid_sensors_door_open(left)◁door_open(left)) = {TRUE}"/>
<org.eventb.core.guard name="_RSb1hHn_EeS3g_eiAim-cA" org.eventb.core.label="doorright" org.eventb.core.predicate="ran(valid_sensors_door_open(right)◁door_open(right)) = {TRUE}"/>
<org.eventb.core.guard name="_hBR-8WfJEeO3ssiFDTK-qw" org.eventb.core.label="grd4" org.eventb.core.predicate="(ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {FALSE}&#10;            ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {FALSE}&#10;            ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {FALSE}&#10;            )&#10;            ∨  (ran(valid_sensors_gear_retracted(front)◁gear_retracted(front)) = {TRUE}&#10;            ∧ ran(valid_sensors_gear_retracted(left)◁gear_retracted(left)) = {TRUE}&#10;            ∧ ran(valid_sensors_gear_retracted(right)◁gear_retracted(right)) = {TRUE}&#10;            ∧ last_gear_action =  {extend_gear_stimulus})"/>
<org.eventb.core.action name="_hBR-8mfJEeO3ssiFDTK-qw" org.eventb.core.assignment="last_gear_action ≔  {retract_gear_stimulus}" org.eventb.core.label="act"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBR-82fJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stop_stimulate_retract_gear_valve">
<org.eventb.core.refinesEvent name="_1VkScqiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stop_stimulate_retract_gear_valve"/>
<org.eventb.core.guard name="_JswsUahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBR-9WfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stimulate_extend_gear_valve">
<org.eventb.core.refinesEvent name="_1Vk5gKiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stimulate_extend_gear_valve"/>
<org.eventb.core.guard name="_JswsU6hcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
<org.eventb.core.guard name="_nvyzYHn_EeS3g_eiAim-cA" org.eventb.core.label="doorfront" org.eventb.core.predicate="ran(valid_sensors_door_open(front)◁door_open(front)) = {TRUE}"/>
<org.eventb.core.guard name="_nvyzYXn_EeS3g_eiAim-cA" org.eventb.core.label="doorleft" org.eventb.core.predicate="ran(valid_sensors_door_open(left)◁door_open(left)) = {TRUE}"/>
<org.eventb.core.guard name="_nvyzYnn_EeS3g_eiAim-cA" org.eventb.core.label="doorright" org.eventb.core.predicate="ran(valid_sensors_door_open(right)◁door_open(right)) = {TRUE}"/>
<org.eventb.core.guard name="_hBSmAmfJEeO3ssiFDTK-qw" org.eventb.core.label="grd" org.eventb.core.predicate="(ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {FALSE}&#10;           ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {FALSE}&#10;           ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {FALSE}&#10;           )&#10;           ∨  (ran(valid_sensors_gear_extended(front)◁gear_extended(front)) = {TRUE}&#10;           ∧ ran(valid_sensors_gear_extended(left)◁gear_extended(left)) = {TRUE}&#10;           ∧ ran(valid_sensors_gear_extended(right)◁gear_extended(right)) = {TRUE}&#10;           ∧ last_gear_action =  {retract_gear_stimulus})"/>
<org.eventb.core.action name="_hBSmA2fJEeO3ssiFDTK-qw" org.eventb.core.assignment="last_gear_action ≔  {extend_gear_stimulus}" org.eventb.core.label="act"/>
</org.eventb.core.event>
<org.eventb.core.event name="_hBSmBGfJEeO3ssiFDTK-qw" org.eventb.core.convergence="0" org.eventb.core.extended="true" org.eventb.core.label="con_stop_stimulate_extend_gear_valve">
<org.eventb.core.refinesEvent name="_1Vk5gaiXEeSuIbt-pGeMCA" org.eventb.core.target="con_stop_stimulate_extend_gear_valve"/>
<org.eventb.core.guard name="_JsxTYahcEeS1Uv-zbYdYYQ" org.eventb.core.label="proof" org.eventb.core.predicate="proof_sensors = FALSE"/>
</org.eventb.core.event>
<org.eventb.core.event name="_Ige10nYcEeSK8a64sCWOYA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.label="sensor_invalid_gear_extended">
<org.eventb.core.parameter name="_RSccknn_EeS3g_eiAim-cA" org.eventb.core.identifier="pos"/>
<org.eventb.core.parameter name="_0rIG8KYpEeS7o8Abhx9ZFQ" org.eventb.core.identifier="val"/>
<org.eventb.core.parameter name="_0rIG8aYpEeS7o8Abhx9ZFQ" org.eventb.core.identifier="notval"/>
<org.eventb.core.guard name="_RScck3n_EeS3g_eiAim-cA" org.eventb.core.label="gear" org.eventb.core.predicate="pos∈ POSITION"/>
<org.eventb.core.guard name="_0rIG8qYpEeS7o8Abhx9ZFQ" org.eventb.core.label="val" org.eventb.core.predicate="val∈BOOL"/>
<org.eventb.core.guard name="_0rIuAKYpEeS7o8Abhx9ZFQ" org.eventb.core.label="notval" org.eventb.core.predicate="notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)"/>
<org.eventb.core.guard name="_zh-wsHYdEeSK8a64sCWOYA" org.eventb.core.label="validyet" org.eventb.core.predicate="card(valid_sensors_gear_extended(pos))=3"/>
<org.eventb.core.guard name="_Ige103YcEeSK8a64sCWOYA" org.eventb.core.label="nowinvalid" org.eventb.core.predicate="card(ran(valid_sensors_gear_extended(pos)◁gear_extended(pos)))&gt;1"/>
<org.eventb.core.guard name="_zh-wsXYdEeSK8a64sCWOYA" org.eventb.core.label="validvalue" org.eventb.core.predicate="card(gear_extended(pos)▷{val})=2"/>
<org.eventb.core.action name="_Igfc4HYcEeSK8a64sCWOYA" org.eventb.core.assignment="valid_sensors_gear_extended(pos) ≔ valid_sensors_gear_extended(pos) ∖ dom(gear_extended(pos)▷{notval})" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_XQxOcKhdEeS1Uv-zbYdYYQ" org.eventb.core.assignment="proof_sensors ≔ FALSE" org.eventb.core.label="unproof"/>
</org.eventb.core.event>
<org.eventb.core.event name="_ziB0AXYdEeSK8a64sCWOYA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.label="sensor_invalid_gear_retracted">
<org.eventb.core.parameter name="_RSdDonn_EeS3g_eiAim-cA" org.eventb.core.identifier="pos"/>
<org.eventb.core.parameter name="_0rJVEKYpEeS7o8Abhx9ZFQ" org.eventb.core.identifier="val"/>
<org.eventb.core.parameter name="_0rJVEaYpEeS7o8Abhx9ZFQ" org.eventb.core.identifier="notval"/>
<org.eventb.core.guard name="_RSdDo3n_EeS3g_eiAim-cA" org.eventb.core.label="gear" org.eventb.core.predicate="pos∈ POSITION"/>
<org.eventb.core.guard name="_0rJVEqYpEeS7o8Abhx9ZFQ" org.eventb.core.label="val" org.eventb.core.predicate="val∈BOOL"/>
<org.eventb.core.guard name="_0rJ8IKYpEeS7o8Abhx9ZFQ" org.eventb.core.label="notval" org.eventb.core.predicate="notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)"/>
<org.eventb.core.guard name="_ziB0AnYdEeSK8a64sCWOYA" org.eventb.core.label="validyet" org.eventb.core.predicate="card(valid_sensors_gear_retracted(pos))=3"/>
<org.eventb.core.guard name="_ziB0A3YdEeSK8a64sCWOYA" org.eventb.core.label="nowinvalid" org.eventb.core.predicate="card(ran(valid_sensors_gear_retracted(pos)◁gear_retracted(pos)))&gt;1"/>
<org.eventb.core.guard name="_ziB0BHYdEeSK8a64sCWOYA" org.eventb.core.label="validvalue" org.eventb.core.predicate="card(gear_retracted(pos)▷{val})=2"/>
<org.eventb.core.action name="_ziB0BXYdEeSK8a64sCWOYA" org.eventb.core.assignment="valid_sensors_gear_retracted(pos) ≔ valid_sensors_gear_retracted(pos) ∖ dom(gear_retracted(pos)▷{notval})" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_XQxOcahdEeS1Uv-zbYdYYQ" org.eventb.core.assignment="proof_sensors ≔ FALSE" org.eventb.core.label="unproof"/>
</org.eventb.core.event>
<org.eventb.core.event name="_0rLxUKYpEeS7o8Abhx9ZFQ" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.label="sensor_invalid_door_open">
<org.eventb.core.parameter name="_0rMYYKYpEeS7o8Abhx9ZFQ" org.eventb.core.identifier="pos"/>
<org.eventb.core.parameter name="_0rMYYaYpEeS7o8Abhx9ZFQ" org.eventb.core.identifier="val"/>
<org.eventb.core.parameter name="_0rMYYqYpEeS7o8Abhx9ZFQ" org.eventb.core.identifier="notval"/>
<org.eventb.core.guard name="_0rMYY6YpEeS7o8Abhx9ZFQ" org.eventb.core.label="gear" org.eventb.core.predicate="pos∈ POSITION"/>
<org.eventb.core.guard name="_0rMYZKYpEeS7o8Abhx9ZFQ" org.eventb.core.label="val" org.eventb.core.predicate="val∈BOOL"/>
<org.eventb.core.guard name="_0rMYZaYpEeS7o8Abhx9ZFQ" org.eventb.core.label="notval" org.eventb.core.predicate="notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)"/>
<org.eventb.core.guard name="_0rM_cKYpEeS7o8Abhx9ZFQ" org.eventb.core.label="validyet" org.eventb.core.predicate="card(valid_sensors_door_open(pos))=3"/>
<org.eventb.core.guard name="_0rM_caYpEeS7o8Abhx9ZFQ" org.eventb.core.label="nowinvalid" org.eventb.core.predicate="card(ran(valid_sensors_door_open(pos)◁door_open(pos)))&gt;1"/>
<org.eventb.core.guard name="_0rM_cqYpEeS7o8Abhx9ZFQ" org.eventb.core.label="validvalue" org.eventb.core.predicate="card(door_open(pos)▷{val})=2"/>
<org.eventb.core.action name="_0rM_c6YpEeS7o8Abhx9ZFQ" org.eventb.core.assignment="valid_sensors_door_open(pos) ≔ valid_sensors_door_open(pos) ∖ dom(door_open(pos)▷{notval})" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_XQx1gKhdEeS1Uv-zbYdYYQ" org.eventb.core.assignment="proof_sensors ≔ FALSE" org.eventb.core.label="unproof"/>
</org.eventb.core.event>
<org.eventb.core.event name="_ziCbGnYdEeSK8a64sCWOYA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.label="sensor_invalid_door_closed">
<org.eventb.core.parameter name="_RSe40Hn_EeS3g_eiAim-cA" org.eventb.core.identifier="pos"/>
<org.eventb.core.parameter name="_h4548KV3EeSLKdWrmraHpQ" org.eventb.core.identifier="val"/>
<org.eventb.core.parameter name="_h4548aV3EeSLKdWrmraHpQ" org.eventb.core.identifier="notval"/>
<org.eventb.core.guard name="_RSe40Xn_EeS3g_eiAim-cA" org.eventb.core.label="gear" org.eventb.core.predicate="pos∈ POSITION"/>
<org.eventb.core.guard name="_h4548qV3EeSLKdWrmraHpQ" org.eventb.core.label="val" org.eventb.core.predicate="val∈BOOL"/>
<org.eventb.core.guard name="_h45486V3EeSLKdWrmraHpQ" org.eventb.core.label="notval" org.eventb.core.predicate="notval∈BOOL ∧ (notval = TRUE ⇔ val=FALSE)"/>
<org.eventb.core.guard name="_ziDCIHYdEeSK8a64sCWOYA" org.eventb.core.label="validyet" org.eventb.core.predicate="card(valid_sensors_door_closed(pos))=3"/>
<org.eventb.core.guard name="_ziDCIXYdEeSK8a64sCWOYA" org.eventb.core.label="nowinvalid" org.eventb.core.predicate="card(ran(valid_sensors_door_closed(pos)◁door_closed(pos)))&gt;1"/>
<org.eventb.core.guard name="_ziDCInYdEeSK8a64sCWOYA" org.eventb.core.label="validvalue" org.eventb.core.predicate="card(door_closed(pos)▷{val})=2"/>
<org.eventb.core.action name="_ziDCI3YdEeSK8a64sCWOYA" org.eventb.core.assignment="valid_sensors_door_closed(pos) ≔ valid_sensors_door_closed(pos) ∖ dom(door_closed(pos)▷{notval})" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_XQyckKhdEeS1Uv-zbYdYYQ" org.eventb.core.assignment="proof_sensors ≔ FALSE" org.eventb.core.label="unproof"/>
</org.eventb.core.event>
<org.eventb.core.event name="_Igfc5HYcEeSK8a64sCWOYA" org.eventb.core.convergence="0" org.eventb.core.extended="false" org.eventb.core.label="sensor_invalid_Anomaly">
<org.eventb.core.parameter name="_RSgG8Hn_EeS3g_eiAim-cA" org.eventb.core.identifier="pos"/>
<org.eventb.core.guard name="_RSff4nn_EeS3g_eiAim-cA" org.eventb.core.label="gear" org.eventb.core.predicate="pos∈ POSITION"/>
<org.eventb.core.guard name="_Igfc5XYcEeSK8a64sCWOYA" org.eventb.core.label="invalid" org.eventb.core.predicate="(  card(valid_sensors_gear_extended(pos)) =2 ∧ card(ran(valid_sensors_gear_extended(pos)◁gear_extended(pos)))&gt;1)&#10;               ∨ (card(valid_sensors_gear_retracted(pos))=2 ∧ card(ran(valid_sensors_gear_retracted(pos)◁gear_retracted(pos)))&gt;1)&#10;               ∨ (card(valid_sensors_door_open(pos))     =2 ∧ card(ran(valid_sensors_door_open(pos)◁door_open(pos)))&gt;1)&#10;               ∨ (card(valid_sensors_door_closed(pos))   =2 ∧ card(ran(valid_sensors_door_closed(pos)◁door_closed(pos)))&gt;1)"/>
<org.eventb.core.action name="_IggD8HYcEeSK8a64sCWOYA" org.eventb.core.assignment="anomaly ≔ TRUE" org.eventb.core.label="act1"/>
<org.eventb.core.action name="_XQyckahdEeS1Uv-zbYdYYQ" org.eventb.core.assignment="proof_sensors ≔ FALSE" org.eventb.core.label="unproof"/>
</org.eventb.core.event>
</org.eventb.core.machineFile>
